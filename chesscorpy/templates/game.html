{% extends "layout.html" %}

{% block title %}
  Game
{% endblock %}

{% block includes %}
  <link rel="stylesheet" href="/static/css/chessboard-1.0.0.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
        crossorigin="anonymous"></script>
  <script src="/static/js/chessboard-1.0.0.min.js"></script>
<script src="/static/js/chess.js"></script>
{% endblock %}

{% block main %}
  <div id="player1"></div>
  <div id="board" style="width: 500px"></div>
  <div id="player2"></div>
  <div id="captured"></div><br>
  <div id="chat"></div><br>

  {% if game_data.my_color != "none" %}
  <div id="chat_form_div">
    <form id="chat_form" onsubmit="postChat(); return false">
      <input type="text" id="msg"><input type="submit" value="Send">
    </form>
  </div>
  {% endif %}

  <script>
    const PLAYER_WHITE = "{{ game_data.player_white_name }}"
    const PLAYER_BLACK = "{{ game_data.player_black_name }}"
    const GAME_ID = {{ game_data.id }}
    const PLAYER_WHITE_ID = {{ game_data.player_white_id }}
    const PLAYER_BLACK_ID = {{ game_data.player_black_id }}
    const USER_COLOR = "{{ game_data.my_color }}"
    const PGN = '{{ game_data.pgn | safe }}'
  </script>
  <script src="/static/js/play_chess.js"></script>
{% endblock %}